<?xml version="1.0" ?>
<vxml version="2.0" xmlns="http://www.w3.org/2001/vxml" xml:lang="fr-FR">
        <var name="count" />
        <var name="rubrique" />
        <var name="message" />
        <var name="menu" />
        <var name="etape" expr="'suivant'" />
        <var name="path_menu" expr="'menus/'" />
        <var name="path_annonce" expr="'annonces/'" />
        
        <property name="inputmodes" value="dtmf"/>
        <property name="termchar" value=""/>

        <catch event="noinput nomatch" count="1"><audio expr="path_menu + 'pas_de_reponse.wav'"/><reprompt/></catch>
        <catch event="noinput nomatch" count="2"><audio expr="path_menu + 'pas_de_reponse.wav'"/><reprompt/></catch>
        <catch event="noinput nomatch" count="3"><disconnect/></catch>



        <menu>
                <audio expr="path_menu + 'bienvenue_avh.wav'"/>
                <choice dtmf="*" next="#navigation" />
                <catch event="noinput" count="1"><audio expr="path_menu + 'pas_de_reponse_touche_etoile.wav'"/></catch>
                <catch event="noinput" count="2"><audio expr="path_menu + 'pas_de_reponse_touche_etoile.wav'"/></catch>
                <catch event="noinput" count="3"><disconnect/></catch>
        </menu>


        <form id="navigation">
          <field name="nav">
            <grammar type="application/srgs+xml" xmlns="http://www.w3.org/2001/06/grammar" mode="dtmf" version="1.0" root="TOPLEVEL" xml:lang="fr">
      				<rule id="TOPLEVEL">
      					<one-of>
      						<item>#</item>
      					</one-of>
      				</rule>
      			</grammar>
            <audio expr="path_menu + 'navigation2.wav'"/>
            <option dtmf="1" value=""/>
            <option dtmf="2" value=""/>
            <option dtmf="3" value=""/>
            <option dtmf="4" value=""/>
            <option dtmf="5" value=""/>
            <option dtmf="6" value=""/>
            <option dtmf="7" value=""/>
            <option dtmf="8" value=""/>
            <option dtmf="9" value=""/>
            <option dtmf="0" value=""/>
            <option dtmf="*" value=""/>
          </field>
            <filled>
              <if cond="nav=='#'">
                <goto next="#menu_general" />
              <else/>
                <goto next="#menu_general" />
              </if>
            </filled>
            <catch event="noinput"><goto next="#menu_general" /></catch>
        </form>


        <menu id="menu_general" >
                <audio expr="path_menu + 'menu_general.wav'" />
                <choice dtmf="1" next="#dernieres_infos" >Les dernières informations</choice>
                <choice dtmf="2" next="#films_audiodecrits" >Les films audiodécrits</choice>
                <choice dtmf="3" next="#culture_loisirs" >Culture, loisirs et sports</choice>
                <choice dtmf="4" next="#sejours_adaptes" >Les séjours adaptés</choice>
                <choice dtmf="5" next="#mediatheque" >La médiathèque de l'Association Valentin Haüy</choice>
                <choice dtmf="6" next="#materiel_specialise" >Le matériel spécialisé</choice>
                <choice dtmf="7" next="#services_avh" >Les services proposés par l'Association Valentin Haüy</choice>
                <choice dtmf="8" next="#avh_siege" >Le siège de l'Association Valentin Haüy en pratique</choice>
                <choice dtmf="9" next="#avh_contact" >Les adresses et téléphones utiles de l'Association Valentin Haüy</choice>
        </menu>


        <form id="lecture_message">
            <block>
              <submit next="navigation.php" namelist="rubrique etape menu" method="post"/>
            </block>
        </form>


        <form id="dernieres_infos">
          <block>
            <assign name="rubrique" expr="'10'"/>
            <assign name="menu" expr="'menu_general'"/>
            <goto next="#lecture_message" />
          </block>
        </form>

        <form id="films_audiodecrits">
          <field name="audiovision">
            <grammar type="application/srgs+xml" xmlns="http://www.w3.org/2001/06/grammar" mode="dtmf" version="1.0" root="TOPLEVEL" xml:lang="fr">
      				<rule id="TOPLEVEL">
      					<one-of>
      						<item>#</item>
      					</one-of>
      				</rule>
      			</grammar>
            <audio expr="path_menu + 'films_audiodecrits.wav'"/>
            <option dtmf="2" value="22">Les films audiodécrits au cinéma</option>
            <option dtmf="1" value="21">Les films du mois à la télévision</option>
          </field>
            <filled>
              <if cond="audiovision=='#'">
                <goto next="#menu_general" />
              <else/>
                <assign name="rubrique" expr="audiovision"/>
                <assign name="menu" expr="'films_audiodecrits'"/>
                <goto next="#lecture_message" />
              </if>
            </filled>
        </form>

        <form id="culture_loisirs">
          <field name="culture">
            <grammar type="application/srgs+xml" xmlns="http://www.w3.org/2001/06/grammar" mode="dtmf" version="1.0" root="TOPLEVEL" xml:lang="fr">
      				<rule id="TOPLEVEL">
      					<one-of>
      						<item>#</item>
      					</one-of>
      				</rule>
      			</grammar>
            <audio expr="path_menu + 'culture_loisirs.wav'"/>
            <option dtmf="1" value="31">Spectacles en audiodescription</option>
            <option dtmf="2" value="32">Les émissions sur la malvoyance</option>
            <option dtmf="3" value="33">Les musées adaptés</option>
            <option dtmf="4" value="34">Les concerts</option>
            <option dtmf="5" value="35">Quelques idées de conférences et animations</option>
            <option dtmf="6" value="36">Les activités sportives</option>
            <option dtmf="7" value="37">Club de la Sizeranne</option>
            <option dtmf="8" value="38">Les Bibliothèques adaptées</option>
          </field>
          <filled>
            <if cond="culture=='#'">
              <goto next="#menu_general" />
            <elseif cond="culture=='36'" />
              <goto next="#activites_sportives" />
            <else/>
              <assign name="rubrique" expr="culture"/>
              <assign name="menu" expr="'culture_loisirs'"/>
              <goto next="#lecture_message" />
            </if>
          </filled>
        </form>
          <form id="activites_sportives">
            <field name="sport">
            <grammar type="application/srgs+xml" xmlns="http://www.w3.org/2001/06/grammar" mode="dtmf" version="1.0" root="TOPLEVEL" xml:lang="fr">
      				<rule id="TOPLEVEL">
      					<one-of>
      						<item>#</item>
      					</one-of>
      				</rule>
      			</grammar>
              <audio expr="path_menu + 'activites_sportives.wav'"/>
              <option dtmf="1" value="361">Entrainements matches et compétitions</option>
              <option dtmf="2" value="362">Randonnées</option>
              <option dtmf="3" value="363">Courir accompagné</option>
              <option dtmf="4" value="364">Sports du Club de la Sizeranne</option>
            </field>
              <filled>
                <if cond="sport=='#'">
                  <goto next="#menu_general" />
                <else/>
                  <assign name="rubrique" expr="sport"/>
                  <assign name="menu" expr="'activites_sportives'"/>
                  <goto next="#lecture_message" />
                </if>
              </filled>
          </form>
        
        <form id="sejours_adaptes">
          <field name="sejour">
            <grammar type="application/srgs+xml" xmlns="http://www.w3.org/2001/06/grammar" mode="dtmf" version="1.0" root="TOPLEVEL" xml:lang="fr">
      				<rule id="TOPLEVEL">
      					<one-of>
      						<item>#</item>
      					</one-of>
      				</rule>
      			</grammar>
            <audio expr="path_menu + 'sejours_adaptes.wav'"/>
            <option dtmf="1" value="41">Séjours à Arvert</option>
            <option dtmf="2" value="42">Autres séjours</option>
          </field>
            <filled>
              <if cond="sejour=='#'">
                <goto next="#menu_general" />
              <else/>
                <assign name="rubrique" expr="sejour"/>
                <assign name="menu" expr="'sejours_adaptes'"/>
                <goto next="#lecture_message" />
              </if>
            </filled>
        </form>

        <form id="mediatheque">
          <field name="media">
            <grammar type="application/srgs+xml" xmlns="http://www.w3.org/2001/06/grammar" mode="dtmf" version="1.0" root="TOPLEVEL" xml:lang="fr">
      				<rule id="TOPLEVEL">
      					<one-of>
      						<item>#</item>
      					</one-of>
      				</rule>
      			</grammar>
            <audio expr="path_menu + 'mediatheque.wav'"/>
            <option dtmf="1" value="51">Nouveautés Livres en braille</option>
            <option dtmf="2" value="52">Nouveautés Livres audios</option>
            <option dtmf="3" value="53">Nouveautés Livres en gros caractères</option>
            <option dtmf="4" value="54">Nouveautés Braille musical</option>
            <option dtmf="5" value="55">Coups de cœur</option>
            <option dtmf="6" value="56">Les animations à venir</option>
            <option dtmf="7" value="57">La médiathèque en pratique</option>
          </field>
            <filled>
              <if cond="media=='#'">
                <goto next="#menu_general" />
              <else/>
                <assign name="rubrique" expr="media"/>
                <assign name="menu" expr="'mediatheque'"/>
                <goto next="#lecture_message" />
              </if>
            </filled>
        </form>        

        <form id="materiel_specialise">
          <field name="sms">
            <grammar type="application/srgs+xml" xmlns="http://www.w3.org/2001/06/grammar" mode="dtmf" version="1.0" root="TOPLEVEL" xml:lang="fr">
      				<rule id="TOPLEVEL">
      					<one-of>
      						<item>#</item>
      					</one-of>
      				</rule>
      			</grammar>
            <audio expr="path_menu + 'materiel_specialise.wav'"/>
            <option dtmf="1" value="61">Informations pratiques</option>
            <option dtmf="2" value="62">Nouveautés et promotions sur le matériel spécialisé</option>
          </field>
            <filled>
              <if cond="sms=='#'">
                <goto next="#menu_general" />
              <else/>
                <assign name="rubrique" expr="sms"/>
                <assign name="menu" expr="'materiel_specialise'"/>
                <goto next="#lecture_message" />
              </if>
            </filled>
        </form>


        <form id="services_avh">
          <field name="service">
            <grammar type="application/srgs+xml" xmlns="http://www.w3.org/2001/06/grammar" mode="dtmf" version="1.0" root="TOPLEVEL" xml:lang="fr">
      				<rule id="TOPLEVEL">
      					<one-of>
      						<item>#</item>
      					</one-of>
      				</rule>
      			</grammar>
            <audio expr="path_menu + 'services_avh.wav'"/>
            <option dtmf="1" value="71">Les publications de l'Association Valentin Haüy</option>
            <option dtmf="2" value="72">Les cours</option>
            <option dtmf="3" value="73">Les formations professionnelles</option>
          </field>
            <filled>
              <if cond="service=='#'">
                <goto next="#menu_general" />
              <elseif cond="service=='72'" />
                <goto next="#les_cours" />
              <else/>
                <assign name="rubrique" expr="service"/>
                <assign name="menu" expr="'services_avh'"/>
                <goto next="#lecture_message" />
              </if>
            </filled>
        </form> 
        <form id="les_cours">
          <field name="locomotion">
            <grammar type="application/srgs+xml" xmlns="http://www.w3.org/2001/06/grammar" mode="dtmf" version="1.0" root="TOPLEVEL" xml:lang="fr">
      				<rule id="TOPLEVEL">
      					<one-of>
      						<item>#</item>
      					</one-of>
      				</rule>
      			</grammar>
            <audio expr="path_menu + 'les_cours.wav'"/>
            <option dtmf="1" value="721">Cours de locomotion</option>
            <option dtmf="2" value="722">Cours d'informatique adaptée</option>
            <option dtmf="3" value="723">Cours de braille</option>
          </field>
            <filled>
              <if cond="locomotion=='#'">
                <goto next="#menu_general" />
              <else/>
                <assign name="rubrique" expr="locomotion"/>
                <assign name="menu" expr="'les_cours'"/>
                <goto next="#lecture_message" />
              </if>
            </filled>
        </form>


        <form id="avh_siege">
          <field name="siege">
            <grammar type="application/srgs+xml" xmlns="http://www.w3.org/2001/06/grammar" mode="dtmf" version="1.0" root="TOPLEVEL" xml:lang="fr">
      				<rule id="TOPLEVEL">
      					<one-of>
      						<item>#</item>
      					</one-of>
      				</rule>
      			</grammar>
            <audio expr="path_menu + 'avh_siege.wav'"/>
            <option dtmf="1" value="81">Adresse, jours  d'ouverture</option>
            <option dtmf="2" value="82">La boutique du Siège</option>
            <option dtmf="3" value="83">Médiathèque</option>
            <option dtmf="4" value="841">Le service d'action sociale</option>
            <option dtmf="5" value="85">SOS lecture-écriture</option>
            <option dtmf="6" value="86">Distributeur de billets</option>
            <option dtmf="7" value="87">Visites guidées et Musées</option>
          </field>
            <filled>
              <if cond="siege=='#'">
                <goto next="#menu_general" />
              <else/>
                <assign name="rubrique" expr="siege"/>
                <assign name="menu" expr="'avh_siege'"/>
                <goto next="#lecture_message" />
              </if>
            </filled>
        </form>
        
        
        <form id="avh_contact">
          <field name="contact">
            <grammar type="application/srgs+xml" xmlns="http://www.w3.org/2001/06/grammar" mode="dtmf" version="1.0" root="TOPLEVEL" xml:lang="fr">
      				<rule id="TOPLEVEL">
      					<one-of>
      						<item>#</item>
      					</one-of>
      				</rule>
      			</grammar>
            <audio expr="path_menu + 'avh_contact.wav'"/>
            <option dtmf="1" value="91">Comités</option>
            <option dtmf="2" value="92">Clubs informatique</option>
            <option dtmf="3" value="93">Les établissements du secteur protégé</option>
            <option dtmf="4" value="94">Les établissements du secteur adapté</option>
            <option dtmf="5" value="95">Les établissements de formation professionnelle</option>
            <option dtmf="6" value="96">Les résidences</option>
          </field>
            <filled>
              <assign name="rubrique" expr="contact"/>
              <if cond="contact=='#'">
                <goto next="#menu_general" />
              <elseif cond="contact=='91'" />
                <goto next="#departement" />
              <elseif cond="contact=='92'" />
                <goto next="#departement" />
              <else/>
                <assign name="menu" expr="'avh_contact'"/>
                <goto next="#lecture_message" />
              </if>
            </filled>
        </form> 

        <form id="departement">
          <field name="numero" type="digits?minlength=2;maxlength=2">
            <grammar type="application/srgs+xml" xmlns="http://www.w3.org/2001/06/grammar" mode="dtmf" version="1.0" root="TOPLEVEL" xml:lang="fr">
      				<rule id="TOPLEVEL">
      					<one-of>
      						<item>#</item>
      					</one-of>
      				</rule>
      			</grammar>
            <prompt><audio expr="path_menu + 'numero_departement.wav'"/></prompt>
          </field>
            <filled>
              <if cond="numero.length == 2">
                <assign name="rubrique" expr="rubrique + numero"/>
                <assign name="menu" expr="'avh_contact'"/>
                <goto next="#lecture_message" />
              <else/>
                <reprompt/>
              </if>
            </filled>
        </form> 

</vxml>
